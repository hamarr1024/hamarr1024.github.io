import{_ as n,o as s,c as a,a as p}from"./app-s8JulthU.js";const t="/assets/1706937614871-8CTlDtNN.png",e="/assets/1706937607128-TmD2L9jX.png",c="/assets/1706937964494-23cI35FP.png",o={},l=p(`<h2 id="java-spiçš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#java-spiçš„ä½¿ç”¨" aria-hidden="true">#</a> Java SPIçš„ä½¿ç”¨</h2><p>Java SPIçš„ä½¿ç”¨ä¸»è¦åˆ†ä¸ºä»¥ä¸‹4ä¸ªæ­¥éª¤:</p><ol><li>ç¼–å†™æ¥å£å’Œå®ç°ç±»</li><li>ç¼–å†™é…ç½®æ–‡ä»¶: åœ¨Resourcesç›®å½•ä¸‹åˆ›å»ºMETA-INF/servicesæ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡ä»¶çš„åå­—å°±æ˜¯æ¥å£çš„å…¨é™å®šå, æ–‡ä»¶å†…å®¹åˆ™æ˜¯å®ç°ç±»çš„å…¨é™å®šåï¼Œæœ‰å¤šä¸ªç”¨æ¢è¡Œç¬¦éš”å¼€</li><li>åŠ è½½æœåŠ¡: ServiceLoader.loadæ–¹æ³•</li><li>éå†æœåŠ¡ï¼šServiceLoaderå®ç°äº† <code>Iterable</code>æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è¿­ä»£å™¨è¿›è¡Œéå†</li></ol><p>ä¸¾ä¸ªğŸŒ°</p><h3 id="æ­¥éª¤ä¸€-ç¼–å†™æ¥å£å’Œå®ç°ç±»" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤ä¸€-ç¼–å†™æ¥å£å’Œå®ç°ç±»" aria-hidden="true">#</a> æ­¥éª¤ä¸€ï¼šç¼–å†™æ¥å£å’Œå®ç°ç±»</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">cc<span class="token punctuation">.</span>hamarr<span class="token punctuation">.</span>javaspi<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>v2<span class="token punctuation">.</span></span><span class="token class-name">IProtocol</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IProtocol</span> <span class="token punctuation">{</span>

    <span class="token keyword">void</span> <span class="token function">sendRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®ç°ç±» : HttpProtocol, TcpProtocol</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cc<span class="token punctuation">.</span>hamarr<span class="token punctuation">.</span>javaspi<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>v2<span class="token punctuation">.</span>http</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cc<span class="token punctuation">.</span>hamarr<span class="token punctuation">.</span>javaspi<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>v2<span class="token punctuation">.</span></span><span class="token class-name">IProtocol</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpProtocol</span> <span class="token keyword">implements</span> <span class="token class-name">IProtocol</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä½¿ç”¨Httpå‘é€è¯·æ±‚: &quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cc<span class="token punctuation">.</span>hamarr<span class="token punctuation">.</span>javaspi<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>v2<span class="token punctuation">.</span>tcp</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cc<span class="token punctuation">.</span>hamarr<span class="token punctuation">.</span>javaspi<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>v2<span class="token punctuation">.</span></span><span class="token class-name">IProtocol</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TcpProtocol</span> <span class="token keyword">implements</span> <span class="token class-name">IProtocol</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä½¿ç”¨Tcpå‘é€è¯·æ±‚: &quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ­¥éª¤äºŒ-ç¼–å†™é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤äºŒ-ç¼–å†™é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> æ­¥éª¤äºŒï¼šç¼–å†™é…ç½®æ–‡ä»¶</h3><p><img src="`+t+'" alt="1706937614871"></p><p><img src="'+e+`" alt="1706937607128"></p><h3 id="æ­¥éª¤ä¸‰-åŠ è½½æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤ä¸‰-åŠ è½½æœåŠ¡" aria-hidden="true">#</a> æ­¥éª¤ä¸‰ï¼šåŠ è½½æœåŠ¡</h3><h3 id="æ­¥éª¤å››-ä½¿ç”¨æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤å››-ä½¿ç”¨æœåŠ¡" aria-hidden="true">#</a> æ­¥éª¤å››ï¼šä½¿ç”¨æœåŠ¡</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cc<span class="token punctuation">.</span>hamarr<span class="token punctuation">.</span>javaspi<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cc<span class="token punctuation">.</span>hamarr<span class="token punctuation">.</span>javaspi<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>v2<span class="token punctuation">.</span></span><span class="token class-name">IProtocol</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ServiceLoader</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SPITest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ServiceLoader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IProtocol</span><span class="token punctuation">&gt;</span></span> loader <span class="token operator">=</span> <span class="token class-name">ServiceLoader</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">IProtocol</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IProtocol</span><span class="token punctuation">&gt;</span></span> iterator <span class="token operator">=</span> loader<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">IProtocol</span> service <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            service <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>service <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            service<span class="token punctuation">.</span><span class="token function">sendRequest</span><span class="token punctuation">(</span><span class="token string">&quot;Hello !&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•ˆæœ:</p><p><img src="`+c+'" alt="1706937964494"></p>',17),i=[l];function u(r,k){return s(),a("div",null,i)}const v=n(o,[["render",u],["__file","Java SPIdeshiyong.html.vue"]]);export{v as default};
